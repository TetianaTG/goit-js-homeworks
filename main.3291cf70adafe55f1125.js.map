{"version":3,"sources":["webpack:///./templates/image-tamplate.hbs","webpack:///./templates/lightbox-tamplate.hbs","webpack:///./js-components/mi.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","lambda","refs","searchForm","document","querySelector","searchOutput","actions","currentSearchQuery","newRequest","searchQuery","this","innerHTML","infiniteScrollInstance","pageIndex","loadNextPage","openModalWindow","currentImg","basicLightbox","lightBoxTamplate","show","infiniteScroll","path","responseType","history","status","scrollThreshold","on","response","JSON","parse","hits","length","window","scrollBy","PNotify","error","text","delay","itemsHTML","map","item","imageTamplate","join","proxyElem","createElement","items","querySelectorAll","appendItems","addEventListener","debounce","e","target","value","dataset","bigphoto"],"mappings":"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","file":"main.3291cf70adafe55f1125.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery__item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img data-bigPhoto=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":28},\"end\":{\"line\":3,\"column\":45}}}) : helper)))\n    + \"\\\" class=\\\"photo-card__img\\\" width=\\\"400\\\" height=\\\"250\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":101},\"end\":{\"line\":3,\"column\":117}}}) : helper)))\n    + \"\\\"\\r\\n            alt=\\\"\\\" />\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":16},\"end\":{\"line\":8,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":16},\"end\":{\"line\":12,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":16},\"end\":{\"line\":16,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":16},\"end\":{\"line\":20,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  \\r\\n<div class=\\\"full-size-image\\\">\\r\\n    <img src=\\\"\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"dataset\") : depth0)) != null ? lookupProperty(stack1,\"bigphoto\") : stack1), depth0))\n    + \"\\\" alt=\\\"\\\" width=\\\"1000\\\" height=\\\"700\\\">\\r\\n</div>\";\n},\"useData\":true});","'use strict';\r\n\r\nimport infiniteScroll from 'infinite-scroll/';\r\nimport imageTamplate from './../templates/image-tamplate.hbs';\r\nimport lightBoxTamplate from './../templates/lightbox-tamplate.hbs';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport PNotify from 'pnotify/dist/es/PNotify.js';\r\nimport { debounce } from 'debounce';\r\n\r\nconst refs = {\r\n  searchForm: document.querySelector('#search-form'),\r\n  searchOutput: document.querySelector('.js-gallery'),\r\n};\r\n\r\nconst actions = {\r\n  currentSearchQuery: '',\r\n  newRequest(searchQuery) {\r\n    if (!searchQuery) return;\r\n    if (this.currentSearchQuery !== searchQuery) {\r\n      this.currentSearchQuery = searchQuery;\r\n      refs.searchOutput.innerHTML = '';\r\n      infiniteScrollInstance.pageIndex = 1;\r\n      infiniteScrollInstance.loadNextPage();\r\n    }\r\n  },\r\n  openModalWindow(currentImg) {\r\n    const imageInstance = basicLightbox.create(lightBoxTamplate(currentImg));\r\n    imageInstance.show();\r\n  },\r\n};\r\n\r\nconst infiniteScrollInstance = new infiniteScroll(refs.searchOutput, {\r\n  path() {\r\n    return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?image_type=photo&orientation=horizontal&key=14909867-6a36d78d4fd06c8c8edd1f81f&q=${actions.currentSearchQuery}&image_type=photo&per_page=12&page=${this.pageIndex}`;\r\n  },\r\n  responseType: 'text',\r\n  history: false,\r\n  status: '.loader-ellips',\r\n  scrollThreshold: 0,\r\n});\r\n\r\ninfiniteScrollInstance.on('load', response => {\r\n  const data = JSON.parse(response);\r\n  if (data.hits.length < 1) {\r\n    window.scrollBy(0, -40);\r\n    return PNotify.error({\r\n      text: 'Sorry, we could not find anything',\r\n      delay: 2000,\r\n    });\r\n  }\r\n  const itemsHTML = data.hits.map(item => imageTamplate(item)).join('');\r\n  const proxyElem = document.createElement('div');\r\n  proxyElem.innerHTML = itemsHTML;\r\n  const items = proxyElem.querySelectorAll('.gallery__item');\r\n  infiniteScrollInstance.appendItems(items);\r\n});\r\n\r\nrefs.searchForm.addEventListener(\r\n  'input',\r\n  debounce(e => actions.newRequest(e.target.value), 500),\r\n);\r\nrefs.searchOutput.addEventListener('click', e => {\r\n  if (e.target.dataset.bigphoto) return actions.openModalWindow(e.target);\r\n  return;\r\n});\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  return infiniteScrollInstance.loadNextPage();\r\n});"],"sourceRoot":""}